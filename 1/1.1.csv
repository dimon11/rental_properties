CREATE TABLE Branch(
bno INTEGER PRIMARY KEY,
street VARCHAR2(30),
city VARCHAR2(20), 
CONSTRAINT city_ch CHECK(city IN('Grodno','Mogilev')),
tel_no VARCHAR2(20) );

CREATE TABLE Staff(
sno INTEGER PRIMARY KEY,
fname VARCHAR(20),
lname VARCHAR2(15),
address VARCHAR2(40),
tel_no VARCHAR2(50),
position VARCHAR2(60),
sex VARCHAR2(6),
CONSTRAINT sex_ch CHECK(sex IN('male','female')), 
dob DATE,
salary INTEGER, 
bno INTEGER,
CONSTRAINT staff_branch FOREIGN KEY (bno) REFERENCES Branch); 
				   
CREATE TABLE Owner(
ono INTEGER PRIMARY KEY ,
fname VARCHAR2(20),
lname VARCHAR2(20), 
address VARCHAR2(60),
tel_no VARCHAR2(30) );				   

CREATE TABLE Property_for_rent(
pno INTEGER PRIMARY KEY,
street VARCHAR2(60),
city VARCHAR2(30),
types VARCHAR2(1),
CONSTRAINT types_ch CHECK(types IN('h','f')),
rooms INTEGER,
rent INTEGER,
ono INTEGER,
sno INTEGER,
bno INTEGER,
CONSTRAINT rent_owner FOREIGN KEY (ono) REFERENCES Owner,
CONSTRAINT rent_staff FOREIGN KEY (sno) REFERENCES Staff,
CONSTRAINT rent_branch FOREIGN KEY (bno) REFERENCES Branch);

CREATE TABLE Renter(
rno INTEGER PRIMARY KEY,
fname VARCHAR2(20),
lname VARCHAR2(20), 
address VARCHAR2(60),
tel_no VARCHAR2(30),
pref_type VARCHAR2(1),
CONSTRAINT pref_type_ch CHECK(pref_type IN('h','f')),
max_rent INTEGER,
bno INTEGER,
CONSTRAINT renter_branch FOREIGN KEY (bno) REFERENCES Branch );

CREATE TABLE Viewing(
rno INTEGER,
pno INTEGER,
CONSTRAINT frn_key_for_renter FOREIGN KEY (rno) REFERENCES Renter,
CONSTRAINT frn_key_for_property FOREIGN KEY (pno) REFERENCES Property_for_rent,
CONSTRAINT pr_keys PRIMARY KEY(rno, pno),
date_o DATE,
comment_o LONG);
					 
CREATE SYNONYM objects
FOR Property_for_rent;

INSERT INTO Branch (bno,street,city,tel_no) values (1,'Gikalo', 'Grodno', '12-12-12');
INSERT INTO Branch (bno,street,city,tel_no) values (2,'Pdadad', 'Grodno', '21-12-21');
INSERT INTO Branch (bno,street,city,tel_no) values (3,'Qwerty', 'Mogilev', '32-24-32');

CREATE SEQUENCE Staff_seq INCREMENT BY 5 START WITH 10;

INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (1,'Petrov','Ivan','Loshicha 45','126745','director','male','12-12-2004','400',2);
INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (2,'Ivanov','Pavel','Loshicha 47','12-27-45','tester','male','12-12-2006','300',3);
INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (3,'Strizhikova','Alesya','Loshicha 49','12-97-45','SQL programmer','female','13-12-2004','500',1);
INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (Staff_seq.NEXTVAL,'Milchman','Alex','Platonova 39','123-97-45','C programmer','male','20-06-2008','1500',3);
INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (Staff_seq.NEXTVAL,'Strizhikova','Alesya','Loshicha 49','12-97-45','C++ programmer','male','13-02-1970','540',2);
INSERT INTO Staff (sno,fname,lname,address,tel_no,position,sex,dob,salary,bno) values (Staff_seq.NEXTVAL,'Panova','Masha','Zhigylova','13-07-47','Java programmer','female','23-02-2014','800',2);

INSERT INTO objects (pno,street,city,rooms,rent,ono,sno,bno) values (1,'Poreshnaya','Novosibirsk','2','30000',3,2,2);
INSERT INTO objects (pno,street,city,rooms,rent,ono,sno,bno) values (2,'Zhniva','Grodno','4','10000',3,3,2);
INSERT INTO objects (pno,street,city,rooms,rent,ono,sno,bno) values (3,'Platonova','Minsk','1','5000',1,2,2);

INSERT INTO Renter (rno,fname,lname,address,tel_no,pref_type,max_rent,bno) values (1,'Bobko','Valeria','Lososeva 90','34-76-87','h','20000',2);
INSERT INTO Renter (rno,fname,lname,address,tel_no,pref_type,max_rent,bno) values (2,'Prishcep','Pasha','Gvineya 23','35-76-87','f','20000',3);
INSERT INTO Renter (rno,fname,lname,address,tel_no,pref_type,max_rent,bno) values (3,'Malysh','Lesha','Molokososnaya','94-76-87','h','10000',1);

INSERT INTO Owner (ono,fname,lname,address,tel_no) values (1,'Churakov','Vasya','Dzerzhinskava 95','76-98-87');
INSERT INTO Owner (ono,fname,lname,address,tel_no) values (2,'Myshkovets','Sasha','Nowy Mir 7','79-98-87');
INSERT INTO Owner (ono,fname,lname,address,tel_no) values (3,'Selevkovich','Alesha','Drogichinskaya 94','7341971');

INSERT INTO Viewing (rno,pno,date_o,comment_o) values (1,1,'11-12-2017','lalalalala');
INSERT INTO Viewing (rno,pno,date_o,comment_o) values (1,2,'03-06-2017','need a doctor');
<<<<<<< HEAD:1/1.1.csv
INSERT INTO Viewing (rno,pno,date_o,comment_o) values (2,1,'11-11-2010','inra itra');
=======
INSERT INTO Viewing (rno,pno,date_o,comment_o) values (2,1,'11-11-2010','inra itra');

SELECT COUNT(rno), COUNT(pno) FROM Viewing WHERE date_o BETWEEN '31.12.2016' and '01.01.2018';

SELECT fname, lname, position, S.tel_no 
FROM objects O, Staff S 
WHERE O.pno=S.bno and city = ‘Минск’;




------------------

Create table Workers(workers INTEGER PRIMARY KEY,
fname VARCHAR220),
lname VARCHAR(15),
email VARCHAR2(30),
tel_no VARCHAR2(30), 
standing varchar2(30) );
Create table Suppliers(suppliers integer primary key,
firm_name varchar2(30), 
country varchar2(30), 
tel_no varchar2(30) );
Create table Clients(cl integer primary key,
fname varchar2(30),
lname varchar2(30), 
firm_name varchar2(30),
tel_no varchar2(30) );

Create table HLM(hlm integer primary key,
title varchar2(40), 
destiny varchar2(20), 
price integer);

Create table Waybills(wb integer primary key,
capacity integer,
price integer,
wb_date date,
hlm integer,
suppliers integer,
workers integer, 
constraint wb_hlm foreign key (hlm) references HLM,
constraint wb_sup foreign key (suppliers) references Suppliers,
constraint wb_work foreign key (workers) references Workers);
>>>>>>> 86906400b46c7b7b437b331cc2bf7dc528e6c414:1/1_laba.csv
